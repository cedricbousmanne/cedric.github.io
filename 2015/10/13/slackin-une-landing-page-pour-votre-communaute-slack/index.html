<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Slackin : une landing page pour votre communauté Slack | Cédric Bousmanne - Ruby, Rails, Indieweb</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Slackin : une landing page pour votre communauté Slack" />
<meta name="author" content="cedric" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Aujourd’hui, nous avons décidés de lancer une communauté Slack pour l’ASBL 6×7. Si vous ne le savez pas encore, Slack est un outil de communication collaboratif qui a le vent en poupe." />
<meta property="og:description" content="Aujourd’hui, nous avons décidés de lancer une communauté Slack pour l’ASBL 6×7. Si vous ne le savez pas encore, Slack est un outil de communication collaboratif qui a le vent en poupe." />
<link rel="canonical" href="/2015/10/13/slackin-une-landing-page-pour-votre-communaute-slack/" />
<meta property="og:url" content="/2015/10/13/slackin-une-landing-page-pour-votre-communaute-slack/" />
<meta property="og:site_name" content="Cédric Bousmanne - Ruby, Rails, Indieweb" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2015-10-13T11:04:16+02:00" />
<script type="application/ld+json">
{"description":"Aujourd’hui, nous avons décidés de lancer une communauté Slack pour l’ASBL 6×7. Si vous ne le savez pas encore, Slack est un outil de communication collaboratif qui a le vent en poupe.","headline":"Slackin : une landing page pour votre communauté Slack","dateModified":"2015-10-13T11:04:16+02:00","datePublished":"2015-10-13T11:04:16+02:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"/2015/10/13/slackin-une-landing-page-pour-votre-communaute-slack/"},"url":"/2015/10/13/slackin-une-landing-page-pour-votre-communaute-slack/","author":{"@type":"Person","name":"cedric"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Cédric Bousmanne - Ruby, Rails, Indieweb" /><link rel="authorization_endpoint" href="https://indieauth.com/auth">
  <link rel="token_endpoint" href="https://tokens.indieauth.com/token">
  <link rel="micropub" href="https://cedricio-micropub-to-github.herokuapp.com/micropub/main">
  <link rel="dns-prefetch" href="https://webmention.io"><link rel="preconnect" href="https://webmention.io"><link rel="preconnect" href="ws://webmention.io:8080"><link rel="pingback" href="https://webmention.io/cedric.io/xmlrpc"><link rel="webmention" href="https://webmention.io/cedric.io/webmention">
</head><body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Cédric Bousmanne - Ruby, Rails, Indieweb</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/a-propos.html">A propos</a><a class="page-link" href="/about/">About</a><a class="page-link" href="/bujo.html">Bujo</a><a class="page-link" href="/indieweb.html">Indieweb</a><a class="page-link" href="/kit-de-survie.html">Kit de survie</a><a class="page-link" href="/now.html">Maintenant</a><a class="page-link" href="/reduction-des-dechets.html">Réduction des déchets</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Slackin : une landing page pour votre communauté Slack</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2015-10-13T11:04:16+02:00" itemprop="datePublished">Oct 13, 2015
      </time>• <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">cedric</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Aujourd’hui, nous avons décidés de lancer <a href="http://slack.6x7asbl.be">une communauté Slack</a> pour l’<a href="http://www.6x7asbl.be">ASBL 6×7</a>. Si vous ne le savez pas encore, <a href="http://slack.com">Slack</a> est un outil de communication collaboratif qui a le vent en poupe.</p>

<p>Le problème, c’est bien évidemment de gérer les invitations. En effet, par défaut, Slack ne permet qu’aux administrateurs du compte d’inviter d’autres membres. Hors, nous souhaitions que les membres potentiels se manifestent d’eux même pour faciliter le processus.</p>

<p>Bien sûr, nous aurions pu mettre en place un <a href="https://www.google.com/intl/fr_be/forms/about/">Google Form</a> relié à une adresse e-mail, mais le processus n’en aurait pas été plus automatisé.</p>

<p>En farfouillant sur GitHub, je suis tombé sur <a href="https://github.com/rauchg/slackin">Slackin</a>, qui permet de gérer ça de manière automatique, et qui offre même un petit badge à afficher sur n’importe quelle page web :</p>

<p><img src="/images/slackin-demo.gif" alt="Slackin" /></p>

<h2 id="nodejs">NodeJS</h2>

<p>Slackin est un module <a href="nodejs.org">NodeJS</a>, nous devons donc commencer par le faire tourner sur la machine qui hébergera le service :</p>

<div class="language-sh highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code>&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; /tmp/
&lt;span class="nv"&gt;$ &lt;/span&gt;wget node-v4.1.2.tar.gz
&lt;span class="nv"&gt;$ &lt;/span&gt;wget https://nodejs.org/dist/v4.1.2/node-v4.1.2.tar.gz
&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;tar&lt;/span&gt; &lt;span class="nt"&gt;-zxvf&lt;/span&gt; node-v4.1.2.tar.gz
&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;cd &lt;/span&gt;node-v4.1.2
&lt;span class="nv"&gt;$ &lt;/span&gt;./configure
&lt;span class="nv"&gt;$ &lt;/span&gt;make
&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;sudo &lt;/span&gt;make install
</code></pre>
  </div>
</div>

<p>Passons à l’installation de <a href="https://www.npmjs.com/">npm</a> et du package slackin :</p>

<!-- more -->

<div class="language-sh highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code>&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;sudo &lt;/span&gt;apt-get install npm
&lt;span class="nv"&gt;$ &lt;/span&gt;npm install &lt;span class="nt"&gt;-g&lt;/span&gt; slackin
</code></pre>
  </div>
</div>

<p>Et pour terminer, on démarre le processus pour faire un premier essais :</p>

<div class="language-sh highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code>slackin &lt;span class="o"&gt;[&lt;/span&gt;votre-sous-domaine-slack] &lt;span class="o"&gt;[&lt;/span&gt;api-token-slack]
</code></pre>
  </div>
</div>

<ul>
  <li>Remplacez <code class="highlighter-rouge">[votre-sous-domaine-slack]</code> par la bonne valeur, dans notre cas : 6x7asbl</li>
  <li>Remplacez <code class="highlighter-rouge">[api-token-slack]</code> par une clé API valide. Trouvez la vôtre <a href="https://api.slack.com/web"><strong>ici</strong></a>.</li>
  <li>Pour quitter le processus, faites <code class="highlighter-rouge">ctrl+c</code></li>
</ul>

<p>Par défaut, le port utilisé est le <code class="highlighter-rouge">:3000</code>, on peut donc ouvrir notre navigateur sur <code class="highlighter-rouge">ip.du.serveur:3000</code> et y découvrir l’interface de Slackin :</p>

<p><img src="/images/6x7asbl-slack-community.jpg" alt="6x7 asbl Slack Community Landing Page" /></p>

<h2 id="créer-le-serveur-node-créer-le-serveur-node">Créer le serveur node {#créer-le-serveur-node}</h2>

<p>Jusque ici, tout fonctionne pour le mieux dans le meilleur des mondes. Mais l’idéal serait de créer un daemon pour controller le démarrage et l’arrêt du processus. On pourra également gérer le démarrage au reboot ou encore le monitorer.</p>

<p>Pour ce faire, nous allons créer un serveur Node.js qui lancera Slackin en tant que module. Le serveur écoutera, comme la commande utilisée précédemment, sur le port <code class="highlighter-rouge">3000</code>.</p>

<p>On crée un fichier <code class="highlighter-rouge">/var/www/slackin/server.js</code> :</p>

<div class="language-sh highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code>&lt;span class="nv"&gt;$ &lt;/span&gt;touch /var/www/slackin/server.js
</code></pre>
  </div>
</div>

<div class="language-js highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code>&lt;span class="nx"&gt;require&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'slackin'&lt;/span&gt;&lt;span class="p"&gt;)({&lt;/span&gt;
  &lt;span class="na"&gt;token&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'[api-token-slack]'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="c1"&gt;// required&lt;/span&gt;
  &lt;span class="na"&gt;interval&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="na"&gt;org&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'[votre-sous-domaine-slack]'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="c1"&gt;// required&lt;/span&gt;
  &lt;span class="c1"&gt;//channels: 'channel,channel,...' // for single channel mode&lt;/span&gt;
  &lt;span class="na"&gt;silent&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt; &lt;span class="c1"&gt;// suppresses warnings&lt;/span&gt;
&lt;span class="p"&gt;}).&lt;/span&gt;&lt;span class="nx"&gt;listen&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3000&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
</code></pre>
  </div>
</div>

<p>Comme précédemment, il faut remplacer les valeurs de <code class="highlighter-rouge">token</code> et <code class="highlighter-rouge">org</code> par nos propres valeurs :</p>

<ul>
  <li>Remplacez <code class="highlighter-rouge">[votre-sous-domaine-slack]</code> par la bonne valeur, dans notre cas : 6x7asbl</li>
  <li>Remplacez <code class="highlighter-rouge">[api-token-slack]</code> par une clé API valide. Trouvez la vôtre <a href="https://api.slack.com/web"><strong>ici</strong></a>.</li>
</ul>

<p>Une fois le fichier sauvegardé, on peut passer à l’étape suivante, la configuration du serveur web.</p>

<h2 id="configuration-de-nginx">Configuration de Nginx</h2>

<div class="highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code>server{
  listen 80;
  server_name slack.6x7asbl.be;
  location / {
    proxy_set_header  X-Real-IP   $remote_addr;
    proxy_set_header  Host        $http_host;
    proxy_pass        http://127.0.0.1:3000;
  }
}
</code></pre>
  </div>
</div>

<p>La configuration est assez simple à comprendre : Nginx écoutera sur le port <code class="highlighter-rouge">80</code> pour le domaine <code class="highlighter-rouge">slack.6x7asbl.be</code> et renverra les requêtes sur la machine locale (<code class="highlighter-rouge">127.0.0.1</code>) sur le port <code class="highlighter-rouge">3000</code>, celui là même que nous avons choisi précédemment dans notre application NodeJS.</p>

<p>Une fois le fichier sauvegardé, nous l’activons en créant un lien symbolique du depuis le dossier <code class="highlighter-rouge">sites-available</code> vers le dossier <code class="highlighter-rouge">sites-enabled</code> :</p>

<div class="language-sh highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code>&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;sudo &lt;/span&gt;ln &lt;span class="nt"&gt;-s&lt;/span&gt; /etc/nginx/sites-available/slack.6x7asbl.be /etc/nginx/sites-enabled/
</code></pre>
  </div>
</div>

<p>On vérifie que la configuration est correcte :</p>

<div class="language-sh highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code>&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;sudo&lt;/span&gt; /usr/sbin/nginx &lt;span class="nt"&gt;-t&lt;/span&gt;
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf &lt;span class="nb"&gt;test &lt;/span&gt;is successful
</code></pre>
  </div>
</div>

<p>Et on relance le service <code class="highlighter-rouge">nginx</code> :</p>

<div class="language-sh highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code>&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;sudo&lt;/span&gt; /etc/init.d/nginx restart
</code></pre>
  </div>
</div>

<h2 id="configuration-de-upstart">Configuration de upstart</h2>

<p>Pour pouvoir utiliser <code class="highlighter-rouge">upstart</code>, nous créons un nouveau fichier de configuration : <code class="highlighter-rouge">/etc/init/slack6x7asblbe.conf</code>.</p>

<div class="language-sh highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code>description &lt;span class="s2"&gt;"node.js server for slack.6x7asbl.be"&lt;/span&gt;
author      &lt;span class="s2"&gt;"akyrho - http://cedric.io"&lt;/span&gt;

&lt;span class="c"&gt;# used to be: start on startup&lt;/span&gt;
&lt;span class="c"&gt;# until we found some mounts weren't ready yet while booting:&lt;/span&gt;
start on started mountall
stop on shutdown

&lt;span class="c"&gt;# Automatically Respawn:&lt;/span&gt;
respawn
respawn limit 99 5

script
    &lt;span class="c"&gt;# Not sure why $HOME is needed, but we found that it is:&lt;/span&gt;
    &lt;span class="nb"&gt;export &lt;/span&gt;&lt;span class="nv"&gt;HOME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"/home/deploy"&lt;/span&gt;

    &lt;span class="nb"&gt;exec&lt;/span&gt; /usr/local/bin/node /var/www/slackin/server.js &lt;span class="o"&gt;&gt;&gt;&lt;/span&gt; /var/log/slack.6x7asbl.be.log 2&gt;&amp;1
end script

post-start script
   &lt;span class="c"&gt;# Optionally put a script here that will notifiy you node has (re)started&lt;/span&gt;
   &lt;span class="c"&gt;# /root/bin/hoptoad.sh "node.js has started!"&lt;/span&gt;
end script
</code></pre>
  </div>
</div>

<p>Attention :</p>

<ul>
  <li>N’oubliez pas de personnaliser la valeur de <code class="highlighter-rouge">HOME</code> à la ligne <code class="highlighter-rouge">15</code></li>
  <li>A la ligne <code class="highlighter-rouge">17</code>, vérifiez bien les différents path</li>
  <li>Le nom du fichier détermine le nom de la commande <code class="highlighter-rouge">upstart</code>, dans notre cas, il s’agit de <code class="highlighter-rouge">slack6x7asblbe</code></li>
</ul>

<p>Il ne reste plus qu’a lancer le service :</p>

<div class="language-sh highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code>&lt;span class="nv"&gt;$ &lt;/span&gt;start slack6x7asblbe
slack6x7asblbe start/running, process 31541
</code></pre>
  </div>
</div>

<p>Pour arrêter le processus :</p>

<div class="language-sh highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code>&lt;span class="nv"&gt;$ &lt;/span&gt;stop slack6x7asblbe
slack6x7asblbe stop/waiting
</code></pre>
  </div>
</div>

  </div>

  <a class="u-url" href="/2015/10/13/slackin-une-landing-page-pour-votre-communaute-slack/" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Cédric Bousmanne - Ruby, Rails, Indieweb</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Cédric Bousmanne - Ruby, Rails, Indieweb</li><li><a class="u-email" href="mailto:cedric@bousmanne.com">cedric@bousmanne.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel= "me" href="https://www.facebook.com/cedric.bousmanne" title="cedric.bousmanne"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#facebook"></use></svg></a></li><li><a rel= "me" href="https://github.com/cedricbousmanne" title="cedricbousmanne"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel= "me" href="https://www.instagram.com/akyrh0" title="akyrh0"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#instagram"></use></svg></a></li><li><a rel= "me" href="https://www.linkedin.com/in/bousmannecedric" title="bousmannecedric"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#linkedin"></use></svg></a></li><li><a rel="me" href="https://ruby.social/@akyrho" title="akyrho"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#mastodon"></use></svg></a></li><li><a rel= "me" href="https://twitter.com/akyrho" title="akyrho"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Father of 2, Indieweb enthousiast, I code for a living</p>
      </div>
    </div>

  </div>

</footer>
<script src="/js/JekyllWebmentionIO.js" async></script>
<template style="display:none" id="webmention-bookmarks"><div class="webmentions webmentions--bookmarks">
  {% if webmentions.size > 0 %}
    <ol class="webmentions__list">
      {% for webmention in webmentions %}
        <li id="webmention-{{ webmention.id }}" class="webmentions__item webmention webmention--{{ webmention.type }}">
          <div class="webmention__content p-content">
            {{ webmention.content }}
          </div>
          <div class="webmention__meta">
            {% if webmention.author %}
              <a class="webmention__author h-card u-url" href="{{ webmention.author.url }}" rel="nofollow">{{ webmention.author.name }}</a>
            {% endif %}
            {% if webmention.pubdate and webmention.url %}on{% endif %}
            {% if webmention.pubdate %}
              <a class="webmention__source u-url" href="{{ webmention.url }}" rel="nofollow">
                <time class="webmention__pubdate dt-published" datetime="{{ webmention.pubdate | date: '%FT%T%:z' }}">{{ webmention.pubdate | date: '%d %B %Y' }}</time>
              </a>
            {% endif %}
          </div>
        </li>
      {% endfor %}
    </ol>
  {% else %}
    <p class="webmentions__not-found">No bookmarks were found.</p>
  {% endif %}
</div></template><template style="display:none" id="webmention-likes"><div class="webmentions webmentions--likes">
  {% if webmentions.size > 0 %}
    <ol class="webmentions__list">
      {% for webmention in webmentions %}
        <li id="webmention-{{ webmention.id }}" class="webmentions__item webmention webmention--{{ webmention.type }}">
          <div class="webmention__author p-author h-card">
            <a class="u-url" href="{{ webmention.author.url }}" rel="nofollow">
              <img class="webmention__author__photo u-photo" src="{{ webmention.author.photo }}" alt="" title="{{ webmention.author.name }}">
            </a>
          </div>
        </li>
      {% endfor %}
    </ol>
  {% else %}
    <p class="webmentions__not-found">No likes were found.</p>
  {% endif %}
</div></template><template style="display:none" id="webmention-links"><div class="webmentions webmentions--links">
  {% if webmentions.size > 0 %}
    <ol class="webmentions__list">
      {% for webmention in webmentions %}
        <li id="webmention-{{ webmention.id }}" class="webmentions__item webmention webmention--{{ webmention.type }}">
          <div class="webmention__content p-content">
            {{ webmention.content }}
          </div>
          <div class="webmention__meta">
            {% if webmention.author %}
              <a class="webmention__author h-card u-url" href="{{ webmention.author.url }}" rel="nofollow">{{ webmention.author.name }}</a>
            {% endif %}
            {% if webmention.pubdate and webmention.url %}on{% endif %}
            {% if webmention.pubdate %}
              <a class="webmention__source u-url" href="{{ webmention.url }}" rel="nofollow">
                <time class="webmention__pubdate dt-published" datetime="{{ webmention.pubdate | date: '%FT%T%:z' }}">{{ webmention.pubdate | date: '%d %B %Y' }}</time>
              </a>
            {% endif %}
          </div>
        </li>
      {% endfor %}
    </ol>
  {% else %}
    <p class="webmentions__not-found">No links were found.</p>
  {% endif %}
</div></template><template style="display:none" id="webmention-posts"><div class="webmentions webmentions--posts">
  {% if webmentions.size > 0 %}
    <ol class="webmentions__list">
      {% for webmention in webmentions %}
        <li id="webmention-{{ webmention.id }}" class="webmentions__item webmention webmention--{{ webmention.type }}">
          <a class="webmention__title webmention__source u-url" href="{{ webmention.url }}" rel="nofollow">{{ webmention.title }}</a>
          <div class="webmention__meta">
            {% if webmention.pubdate %}
              <time class="webmention__pubdate dt-published" datetime="{{ webmention.pubdate | date: '%FT%T%:z' }}">{{ webmention.pubdate | date: '%d %B %Y' }}</time>
            {% endif %}
          </div>
        </li>
      {% endfor %}
    </ol>
  {% else %}
    <p class="webmentions__not-found">No posts were found.</p>
  {% endif %}
</div></template><template style="display:none" id="webmention-replies"><div class="webmentions webmentions--replies">
  {% if webmentions.size > 0 %}
    <ol class="webmentions__list">
      {% for webmention in webmentions %}
        <li id="webmention-{{ webmention.id }}" class="webmentions__item webmention webmention--{{ webmention.type }}">
          <div class="webmention__content p-content">
            {{ webmention.content }}
          </div>
          <div class="webmention__meta">
            {% if webmention.author %}
              <a class="webmention__author h-card u-url" href="{{ webmention.author.url }}" rel="nofollow">
                {% if webmention.author.photo %}
                  <img class="webmention__author__photo u-photo" src="{{ webmention.author.photo }}" alt="" title="{{ webmention.author.name }}">
                {% endif %}
                <b class="p-name">{{ webmention.author.name }}</b>
              </a>
            {% endif %}
            {% if webmention.pubdate and webmention.author %}on{% endif %}
            {% if webmention.pubdate %}
              <a class="webmention__source u-url" href="{{ webmention.url }}" rel="nofollow">
                <time class="webmention__pubdate dt-published" datetime="{{ webmention.pubdate | date: '%FT%T%:z' }}">{{ webmention.pubdate | date: '%d %B %Y' }}</time>
              </a>
            {% endif %}
          </div>
        </li>
      {% endfor %}
    </ol>
  {% else %}
    <p class="webmentions__not-found">No replies were found.</p>
  {% endif %}
</div></template><template style="display:none" id="webmention-reposts"><div class="webmentions webmentions--reposts">
  {% if webmentions.size > 0 %}
    <ol class="webmentions__list">
      {% for webmention in webmentions %}
        <li id="webmention-{{ webmention.id }}" class="webmentions__item webmention webmention--{{ webmention.type }}">
          <div class="webmention__author p-author h-card">
            <a class="u-url" href="{{ webmention.author.url }}" rel="nofollow">
              <img class="webmention__author__photo u-photo" src="{{ webmention.author.photo }}" alt="" title="{{ webmention.author.name }}">
            </a>
          </div>
        </li>
      {% endfor %}
    </ol>
  {% else %}
    <p class="webmentions__not-found">No reposts were found.</p>
  {% endif %}
</div></template><template style="display:none" id="webmention-rsvps"><div class="webmentions webmentions--rsvps">
  {% if webmentions.size > 0 %}
    <ol class="webmentions__list">
      {% for webmention in webmentions %}
        <li id="webmention-{{ webmention.id }}" class="webmentions__item webmention webmention--{{ webmention.type }}">
          <div class="webmention__author p-author h-card">
            <a class="u-url" href="{{ webmention.author.url }}" rel="nofollow">
              <img class="webmention__author__photo u-photo" src="{{ webmention.author.photo }}" alt="Avatar for {{ webmention.author.name }}" title="{{ webmention.author.name }}">
              <b class="p-name">{{ webmention.author.name }}</b>
              {{ webmention.content }}
            </a>
          </div>
        </li>
      {% endfor %}
    </ol>
  {% else %}
    <p class="webmentions__not-found">No RSVPs were found.</p>
  {% endif %}
</div></template><template style="display:none" id="webmention-count">{% capture webmention_types %}{{ types | join: ',' }}{% endcapture %}
<span class="webmention-count"{% unless webmention_types=="" %} data-webmention-types="{{ webmention_types }}"{% endunless %}>{{ count }}</span></template><template style="display:none" id="webmention-webmentions">{% capture webmention_types %}{{ types | join: ',' }}{% endcapture %}
<div class="webmentions"{% unless webmention_types=="" %} data-webmention-types="{{ webmention_types }}"{% endunless %}>
  {% if webmentions.size > 0 %}
    <ol class="webmentions__list">
      {% for webmention in webmentions %}
        <li id="webmention-{{ webmention.id }}" class="webmentions__item">
          <article class="h-cite webmention webmention--{{ webmention.type }}
            {% unless webmention.author %}webmention--no-author{% endunless %}
            {% unless webmention.author.photo %}webmention--no-photo{% endunless %}
            {% if webmention.source=='twitter' %}{% if webmention.type=='like' or webmention.type=='repost' %}webmention--author-starts{% endif %}{% endif %}
            ">
            {% if webmention.author %}
              <div class="webmention__author p-author h-card">
                <a class="u-url" href="{{ webmention.author.url }}" rel="nofollow">
                  {% if webmention.author.photo %}
                    <img class="webmention__author__photo u-photo" src="{{ webmention.author.photo }}" alt="" title="{{ webmention.author.name }}">
                  {% endif %}
                  <b class="p-name">{{ webmention.author.name }}</b>
                </a>
              </div>
            {% endif %}

            <div class="webmention__content p-content">
              {% if webmention.content %}
                {{ webmention.content }}
              {% else %}
                {{ webmention.title }}
              {% endif %}
            </div>
            
            <div class="webmention__meta">
              {% if webmention.pubdate %}
                <time class="webmention__pubdate dt-published"
                      datetime="{{ webmention.pubdate | date: '%FT%T%:z' }}">{{ webmention.pubdate | date: '%d %B %Y' }}</time>
              {% endif %}
              {% if webmention.pubdate and webmention.url %}|{% endif %}
              {% if webmention.url %}
                <a class="webmention__source u-url" href="{{ webmention.url }}" rel="nofollow">Permalink</a>
              {% endif %}
            </div>
          </article>
        </li>
      {% endfor %}
    </ol>
  {% else %}
    <p class="webmentions__not-found">No webmentions were found.</p>
  {% endif %}
</div></template>

  </body>

</html>
